# **ISO 20022 (Financial Services Messaging) - Standard Guidance**

## **Overview**

ISO 20022 is the global multi-part standard for financial services messaging. While often associated with XML/JSON message schemas (pacs, pain, camt), for MD-DDL modeling we focus on the **ISO 20022 Business Model**.

* **Business Components**: Represent the "Entities" (e.g., `CashAccount`, `Party`).
* **Business Elements**: Represent the "Attributes" (e.g., `IBAN`, `Currency`).
* **Business Associations**: Represent the "Relationships" (e.g., `AccountOwner`).

**For MD-DDL modeling, reference Business Components and Elements, NOT Message Definitions.**

## **ISO 20022 Dictionary Structure**

ISO 20022 organizes data into a semantic hierarchy:

```text
Party (Business Component)
├─ Name
├─ PostalAddress
└─ Identification

Agent (Business Component - specialized Financial Institution)
├─ BICFI
└─ ClearingSystemMemberIdentification

Account (Business Component)
├─ CashAccount
└─ SecuritiesAccount

```

## **Finding ISO 20022 Components**

### **Search Process**

1. **Identify Concept**: User mentions a concept (e.g., "Bank Account").
2. **Search Dictionary**: Search the [ISO 20022 External Code Sets](https://www.iso20022.org/catalogue-messages/additional-content-messages/external-code-sets) or the [Data Dictionary](https://www.google.com/search?q=https://www.iso20022.org/iso-20022-dictionary-item).
3. **Identify Business Component**: Locate the PascalCase name (e.g., `CashAccount`).
4. **Reference in MD-DDL**: Use the official ISO component name in the `references:` block.

### **Common ISO 20022 Mappings**

| Business Term | ISO 20022 Component | Notes |
| --- | --- | --- |
| **Customer / Person** | `Party` | Generic non-financial institution. |
| **Bank / Credit Union** | `FinancialInstitutionAgent` | Often shortened to `Agent`. |
| **Bank Account** | `CashAccount` | Used for payments and savings. |
| **Balance** | `CashBalance` | Includes amount and credit/debit indicator. |
| **Payment Transfer** | `CreditTransferTransaction` | The core "Event" or "Entity". |
| **Currency** | `ActiveOrHistoricCurrencyCode` | 3-character ISO 4217 code. |
| **Address** | `PostalAddress` | Includes street, building, town, etc. |

## **ISO 20022 "Agent vs. Party" Pattern**

**Critical Pattern**: ISO 20022 strictly separates Financial Institutions from other entities.

* **Agent**: A financial institution (Bank, Central Bank, Clearing House).
* **Party**: A natural person or legal entity (Customer, Merchant, Government).

### **When to Use ISO 20022 Agent Pattern**

Ask user: "Are we modeling interactions between banks, or between a bank and its customers?"

* **Inter-bank (B2B)**: Use `FinancialInstitutionAgent` for all participants.
* **Retail (B2C)**: Use `Party` for customers and `Agent` for the servicing bank.

## **ISO 20022 vs. Business Terminology**

| ISO Term | Common Business Term | MD-DDL Recommendation |
| --- | --- | --- |
| **CashAccount** | Bank Account | Use "Bank Account", reference `CashAccount`. |
| **Agent** | Financial Institution | Use "Bank" or "Institution", reference `Agent`. |
| **Ultimate Debtor** | Original Payer | Use "Payer", reference `UltimateDebtor`. |
| **Instructed Amount** | Transaction Amount | Use "Transaction Amount", reference `InstdAmt`. |

## **Common ISO 20022 Patterns in MD-DDL**

### **Pattern 1: The Account Reference**

ISO 20022 decomposes an account into its identification and its servicing bank.

```markdown
### Bank Account
A financial account maintained by a bank for a customer.
- detail: [Bank Account](entities/bank-account.md)
- references: [ISO 20022 - CashAccount](https://www.iso20022.org/iso-20022-dictionary-item/CashAccount)

### Account Identifier
The unique code for the account (IBAN, BBAN, or UPIC).
- specializes: [Identification](entities/identification.md)
- references: [ISO 20022 - AccountIdentification](url)

```

### **Pattern 2: The Payment Event**

Payments in ISO 20022 are highly structured. Use this pattern for the "Event" layer.

```markdown
## Events

### Payment Initiated
Triggered when a customer requests a fund transfer.
```yaml
actor: Customer
entity: Payment Instruction
attributes:
  - Instructed Amount:
      type: decimal
      references: [ISO 20022 - InstdAmt]
  - Charge Bearer:
      type: enum:ChargeBearerType
      references: [ISO 20022 - ChrgBr]

```

## **Hybrid Standards Mapping (BIAN + ISO 20022)**

For most Banking domains, you will map to **BIAN** for the internal business capability and **ISO 20022** for the data structure:

* **Internal Domain Structure**: Aligned to [BIAN Service Domains](bian.md).
* **Data Entity DNA**: Aligned to **ISO 20022 Business Components**.

**Example**:

```markdown
### Cash Account
- references:
    - [BIAN BOM - Account](https://bian-modelapi-v4.azurewebsites.net/BOClassByName/Account)
    - [ISO 20022 - CashAccount](https://www.iso20022.org/iso-20022-dictionary-item/CashAccount)
```

## **Resources**

* [ISO 20022 Official Catalogue](https://www.iso20022.org/catalogue-messages)
* [ISO 20022 Data Dictionary](https://www.google.com/search?q=https://www.iso20022.org/iso-20022-dictionary-item)
* [ISO 20022 e-Dictionary (Browsing Tool)](https://www.google.com/search?q=https://www.iso20022.org/catalogue-messages/iso-20022-e-dictionary)
